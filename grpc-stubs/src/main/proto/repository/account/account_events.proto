syntax = "proto3";

package io.pipeline.repository.account;

option java_package = "io.pipeline.repository.account";
option java_outer_classname = "AccountEventsProto";
option java_multiple_files = true;

import "google/protobuf/timestamp.proto";

// Account lifecycle events for Kafka
message AccountEvent {
  // Deterministic: hash(account_id + operation + timestamp_millis)
  string event_id = 1;
  
  google.protobuf.Timestamp timestamp = 2;
  string account_id = 3;
  
  // The actual state change
  oneof operation {
    Created created = 10;
    Updated updated = 11;
    Inactivated inactivated = 12;
    Reactivated reactivated = 13;
  }
  
  // Account created
  message Created {
    string name = 1;
    string description = 2;
  }
  
  // Account updated
  message Updated {
    string name = 1;
    string description = 2;
  }
  
  // Account inactivated
  message Inactivated {
    string reason = 1;
  }
  
  // Account reactivated
  message Reactivated {
    string reason = 1;
  }
}
